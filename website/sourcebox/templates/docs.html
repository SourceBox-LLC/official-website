{% extends 'base.html' %}
{% block title %}Docs{% endblock %}
{% block content %}
<div class="row">
  <!-- Sidebar Navigation with Adjusted Fixed Positioning -->
  <div class="col-4">
    <nav id="navbar-example3" class="h-100 flex-column align-items-stretch pe-4 border-end" style="position: fixed; top: 80px; left: 15px; width: 200px;">
      <nav class="nav nav-pills flex-column">
        <a class="nav-link" href="#item-1" onclick="toggleAccordion('collapseOne', '#headingOne')">Welcome</a>
        <a class="nav-link" href="#item-2" onclick="toggleAccordion('collapseTwo', '#headingTwo')">Pack-Man</a>
        <a class="nav-link" href="#item-3" onclick="toggleAccordion('collapseThree', '#headingThree')">SourceLightning</a>
        <a class="nav-link" href="#item-4" onclick="toggleAccordion('collapseFour', '#headingFour')">DeepQuery</a>
        <a class="nav-link" href="#item-5" onclick="toggleAccordion('collapseFive', '#headingFive')">DeepQuery Code</a>
      </nav>
    </nav>
  </div>

  <!-- Main Content Area -->
  <div class="col-8" style="margin-left: 230px;">
    <div class="accordion" id="accordionExample">
      <!-- Welcome Accordion -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingOne">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
            Welcome
          </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <h4 id="our-mission">Our Mission</h4>
            <p>
              At SourceBox, our mission is to simplify the integration of data with advanced AI tools, making it accessible and user-friendly for everyone.
            </p>
            <h4 id="services">Services</h4>
            <p>
              We provide a robust set of tools and platforms for data retrieval, packaging, and deployment.
            </p>
            <h4 id="support">Support</h4>
            <p>
              Our team is here to provide comprehensive support for your data integration and AI projects.
            </p>
          </div>
        </div>
      </div>

      <!-- Pack-Man Accordion -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Pack-Man
          </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <!-- Dynamically loaded Pack-Man README content -->
            {{ packman_readme_html|safe }}
          </div>
        </div>
      </div>

      <!-- Source-Lightning Accordion -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingThree">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Source-Lightning
          </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <!-- Dynamically loaded Source-Lightning README content -->
            {{ sourcelightning_readme_html|safe }}
          </div>
        </div>
      </div>

      <!-- DeepQuery Accordion -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFour">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            DeepQuery
          </button>
        </h2>
        <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <!-- Dynamically loaded DeepQuery README content -->
            {{ deepquery_readme_html|safe }}
          </div>
        </div>
      </div>

      <!-- DeepQuery Code Accordion -->
      <div class="accordion-item">
        <h2 class="accordion-header" id="headingFive">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
            DeepQuery Code
          </button>
        </h2>
        <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <!-- Dynamically loaded DeepQuery Code README content -->
            {{ deepquery_code_readme_html|safe }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Custom CSS to Ensure Content Stays within Accordion Boundaries -->
<style>
  .accordion-body img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
  }
  .accordion-body pre {
    white-space: pre-wrap;
    word-wrap: break-word;
  }
</style>

<script>
  function toggleAccordion(collapseID, headerID) {
    var collapseElement = document.getElementById(collapseID);
    if (collapseElement) {
      var bsCollapse = new bootstrap.Collapse(collapseElement, { toggle: true });
    }
    if (headerID) {
      setTimeout(() => {
        var headerElement = document.querySelector(headerID);
        if (headerElement) {
          headerElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }, 300); // Delay to allow the accordion to open before scrolling
    }
  }
</script>

{% endblock %}
